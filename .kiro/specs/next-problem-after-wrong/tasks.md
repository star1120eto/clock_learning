# Implementation Plan: next-problem-after-wrong

## Task Format Template

各タスクは能力・成果で記述し、要件IDで紐付ける。本機能は GameState → GameScreen → テストの順で依存するため直列実行が自然。

---

## 1. 不正解時は自動進行せず、ボタンで次に進む処理を追加する

- [x] 1. 回答確定後の進行を正解時のみ自動にし、不正解時はユーザー操作で次に進むようにする
- [x] 1.1 回答確定時に正解だったときだけ一定時間経過後に次の問題へ進むようにする。不正解だったときは自動では進まない
  - _Requirements: 1.2, 3.1_
- [x] 1.2 不正解表示中にユーザーが「つぎのもんだい」を押したときに次の問題へ進むための公開処理を追加する
  - _Requirements: 2.1, 2.2, 2.3_

---

## 2. ゲーム画面で不正解時に「つぎのもんだい」ボタンを表示する

- [x] 2. 不正解時に「つぎのもんだい」ボタンを表示し、タップで次問題に進むようにする
- [x] 2.1 不正解表示中は「ちがいます」・正解説明に加え、表示文言「つぎのもんだい」のボタンを表示する。タップで次問題へ進む処理を呼ぶ
  - _Requirements: 1.1, 2.1_
- [x] 2.2 不正解表示中は「こたえをきめる」を出さず「つぎのもんだい」に置き換える。回答前は従来どおり「こたえをきめる」のみ表示する
  - _Requirements: 1.1, 3.2_

---

## 3. 既存挙動の維持確認とテストの整備

- [x] 3. 不正解時の手動進行と正解時の自動進行が正しく動作することを保証する
- [x] 3.1 回答確定で不正解のときは自動で次に進まないこと、および「つぎのもんだい」用の処理を呼ぶと次の問題が表示されることを単体テストで検証する
  - _Requirements: 1.2, 2.1_
- [x] 3.2 不正解後に「つぎのもんだい」が表示され、タップすると次の問題に切り替わることを Widget または統合テストで検証する。正解時は従来どおり自動で次に進むことを確認する
  - _Requirements: 1.1, 3.1, 3.2_
