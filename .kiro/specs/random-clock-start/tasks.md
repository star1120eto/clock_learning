# Implementation Plan: random-clock-start

## Task Format Template

各タスクは能力・成果で記述し、要件IDで紐付ける。並列実行可能なタスクには `(P)` を付与（本機能は依存のため直列実行が自然）。

---

## 1. ランダム開始時刻を返すユーティリティの追加

- [x] 1. レベルに応じたランダムな時計の開始時刻を算出する処理を追加する
- [x] 1.1 レベルごとの有効範囲（時: 1〜12、分: かんたんは0のみ・ふつうは5分刻み・むずかしいは0〜59）に従い、ランダムな「時」と「分」を返す処理を実装する
  - 呼び出し元からレベルを渡せること
  - テストで再現性を確保するため、乱数ソースをオプションで渡せるようにする
  - _Requirements: 1.1, 1.2, 1.3_
- [x] 1.2 上記処理の単体テストを追加する（各レベルで返る値が有効範囲内であること、乱数を固定したときに同じ結果になること）
  - _Requirements: 1.2, 1.3_

---

## 2. ゲーム画面で問題表示時にランダム開始時刻を使う

- [x] 2. 次の問題を表示するたびに、時計の初期表示をランダムな開始時刻にする
- [x] 2.1 問題生成後に時計を初期化する箇所で、固定の12時0分の代わりに、上記ユーティリティで得た「時」「分」で時計を初期化する
  - 問題の目標時刻（正解）や正解判定のロジックは変更しない
  - _Requirements: 1.1, 1.4, 2.1, 3.2_

---

## 3. 既存挙動の維持確認とテストの整備

- [ ] 3. ランダム開始導入後も既存のゲームフロー・正解判定・フィードバックが変わらないことを保証する
- [ ] 3.1 次の問題表示で再度ランダムな開始時刻が使われること、およびレベルに応じた分針の操作・スナップが従来どおりであることを確認する
  - _Requirements: 3.1, 3.2_
- [ ] 3.2 既存の統合テスト・E2Eテストを実行し、問題表示→針を合わせる→正解/不正解の流れがランダム開始後も動作することを確認する。開始時刻が12時0分であることを前提にしたアサーションがあれば、許容するよう修正する
  - _Requirements: 2.2, 2.3, 3.3_
